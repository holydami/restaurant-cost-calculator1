<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë ˆìŠ¤í† ë‘ ì›ê°€ ê³„ì‚°ê¸°</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    input, select { padding: 5px; margin: 4px 0; width: 100%; }
    .button { margin-top: 10px; padding: 10px 15px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
    .button:hover { background-color: #45a049; }
    .result { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>ğŸ½ ë ˆìŠ¤í† ë‘ ì›ê°€ ê¸°ë°˜ íŒë§¤ê°€ ê³„ì‚°ê¸°</h2>

  <div>
    <h3>ì¬ë£Œ ì¶”ê°€</h3>
    <input type="text" id="ingredientName" placeholder="ì¬ë£Œëª…">
    <input type="number" id="unitCost" placeholder="ë‹¨ê°€">
    <select id="unitType">
      <option value="100g">100gë‹¹</option>
      <option value="1kg">1kgë‹¹</option>
      <option value="ê°œë‹¹">ê°œë‹¹</option>
      <option value="ë§ˆë¦¬ë‹¹">ë§ˆë¦¬ë‹¹</option>
    </select>
    <input type="number" id="amountUsed" placeholder="ì‚¬ìš©ëŸ‰ (g, ê°œ, ë§ˆë¦¬ ë“±)">
    <button class="button" onclick="addIngredient()">â• ì¶”ê°€</button>
  </div>

  <table id="ingredientTable">
    <thead>
      <tr><th>ì¬ë£Œëª…</th><th>ë‹¨ê°€</th><th>ë‹¨ìœ„</th><th>ì‚¬ìš©ëŸ‰</th><th>ì›ê°€</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <div>
    <h3>ì¶”ê°€ ë¹„ìš© ë° ë§ˆì§„</h3>
    <input type="number" id="overhead" placeholder="ê°„ì ‘ë¹„ (ê¸ˆì•¡)">
    <input type="number" id="profitMargin" placeholder="ì´ìœ¤ìœ¨ (%)">
    <button class="button" onclick="calculatePrice()">ğŸ’° ìµœì¢… íŒë§¤ê°€ ê³„ì‚°</button>
  </div>

  <div class="result" id="result"></div>

  <script>
    const ingredients = [];

    function convertTo100g(unitType, unitCost) {
      switch(unitType) {
        case '100g': return unitCost;
        case '1kg': return unitCost / 10;
        case 'ê°œë‹¹': return unitCost;
        case 'ë§ˆë¦¬ë‹¹': return unitCost;
        default: return unitCost;
      }
    }

    function addIngredient() {
      const name = document.getElementById('ingredientName').value;
      const unitCost = parseFloat(document.getElementById('unitCost').value);
      const unitType = document.getElementById('unitType').value;
      const amountUsed = parseFloat(document.getElementById('amountUsed').value);

      if (!name || isNaN(unitCost) || isNaN(amountUsed)) return;

      const adjustedUnitCost = convertTo100g(unitType, unitCost);
      const cost = (unitType === '100g' || unitType === '1kg') 
                   ? adjustedUnitCost * amountUsed / 100 
                   : adjustedUnitCost * amountUsed;

      ingredients.push({ name, unitCost, unitType, amountUsed, cost });

      const table = document.querySelector('#ingredientTable tbody');
      const row = table.insertRow();
      row.innerHTML = `<td>${name}</td><td>${unitCost}</td><td>${unitType}</td><td>${amountUsed}</td><td>${cost.toFixed(2)}</td>`;

      document.getElementById('ingredientName').value = '';
      document.getElementById('unitCost').value = '';
      document.getElementById('amountUsed').value = '';
    }

    function calculatePrice() {
      const overhead = parseFloat(document.getElementById('overhead').value) || 0;
      const profitMargin = parseFloat(document.getElementById('profitMargin').value) || 0;

      const totalCost = ingredients.reduce((sum, item) => sum + item.cost, 0);
      const finalPrice = (totalCost + overhead) / (1 - profitMargin / 100);

      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = `
        ğŸ“¦ ì´ ì›ê°€: ${totalCost.toFixed(2)}ì›<br>
        ğŸ§¾ ê°„ì ‘ë¹„: ${overhead.toFixed(2)}ì›<br>
        ğŸ“ˆ ì´ìœ¤ìœ¨: ${profitMargin}%<br>
        ğŸ’µ ìµœì¢… íŒë§¤ê°€: <strong>${finalPrice.toFixed(0)}ì›</strong>
      `;
    }
  </script>
</body>
</html>
